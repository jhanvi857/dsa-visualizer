function z(){const e=document.getElementById("visualize");return e||console.warn("visualize container not found"),e}document.getElementById("visualize");class T{constructor(t){this.value=t,this.next=null}}class V{constructor(){this.head=null,this.size=0}insertAtStart(t){const n=new T(t);n.next=this.head,this.head=n,this.size++}insertAtEnd(t){const n=new T(t);if(this.head==null){this.head=n;return}let s=this.head;for(;s.next!=null;)s=s.next;s.next=n,this.size++}deleteAtIndex(t){if(t<0||t>=this.size)return null;if(t===0){this.head=this.head.next,this.size--;return}let n=null,s=this.head,a=0;for(;a<t;)n=s,s=s.next,a++;n.next=s.next,this.size--}search(t){let n=this.head,s=0;for(;n;){if(n.value===t)return s;n=n.next,s++}return-1}updateAtIndex(t,n){if(t<0||t>=this.size)return!1;let s=this.head,a=0;for(;a<t;)s=s.next,a++;return s.value=n,!0}toArray(){const t=[];let n=this.head;for(;n;)t.push(n.value),n=n.next;return t}}class P{constructor(t){this.value=t,this.left=null,this.right=null,this.parent=null}}let j=null;function q(e){j=e}function w(){return j}function I(e,t){return e?(t<e.value?e.left=I(e.left,t):e.right=I(e.right,t),e):new P(t)}function A(e){const t=z();t.innerHTML="",t.style.position="relative";let n=[],s=0;function a(l,d=0){l&&(a(l.left,d+1),n.push({node:l,x:s++,y:d}),a(l.right,d+1))}a(e);const i=80,c=100;n.forEach(({node:l,x:d,y:m})=>{const u=document.createElement("div");u.className="absolute w-12 h-12 bg-blue-500 text-white font-bold rounded-full flex items-center justify-center scale-0 transition-transform duration-300",u.innerText=l.value,u.style.left=`${d*i}px`,u.style.top=`${m*c}px`,t.appendChild(u),requestAnimationFrame(()=>u.classList.replace("scale-0","scale-100"))});const r=new Map;n.forEach(({node:l,x:d,y:m})=>{r.set(l,{x:d*i+24,y:m*c+24})}),r.forEach((l,d)=>{if(d.left){const m=r.get(d.left);S(l,m)}if(d.right){const m=r.get(d.right);S(l,m)}})}function S(e,t){const n=document.createElement("div");n.className="absolute text-white text-2xl";const a=t.x-e.x<0?"↙":"⤷";n.innerText=a,n.style.left=`${(e.x+t.x)/2}px`,n.style.top=`${(e.y+t.y)/2-10}px`,n.style.transform="translate(-50%, -50%)",z().appendChild(n)}async function g(e){const t=document.querySelectorAll("#visualize div");for(const n of t)if(n.innerText==e){n.classList.add("bg-green-500"),await H(700),n.classList.remove("bg-green-500");break}}async function N(e){e&&(await N(e.left),await g(e.value),await N(e.right))}async function B(e){e&&(await g(e.value),await B(e.left),await B(e.right))}async function $(e){e&&(await $(e.left),await $(e.right),await g(e.value))}async function O(e){if(!e)return;const t=[e];for(;t.length>0;){const n=t.shift();await g(n.value),n.left&&t.push(n.left),n.right&&t.push(n.right)}}function E(e,t){if(!e)return null;if(t<e.value)e.left=E(e.left,t);else if(t>e.value)e.right=E(e.right,t);else{if(!e.left)return e.right;if(!e.right)return e.left;let n=e.right;for(;n.left;)n=n.left;e.value=n.value,e.right=E(e.right,n.value)}return e}const p={vertices:[],edges:[],adjList:{},addVertex:function(e){e=e.trim().toLowerCase(),this.vertices.includes(e)||(this.vertices.push(e),this.adjList[e]=[],this.render())},addEdge:function(e,t,n=1){e=e.trim().toLowerCase(),t=t.trim().toLowerCase(),this.adjList[e]&&this.adjList[t]?(this.adjList[e].push({node:t,weight:n}),this.adjList[t].push({node:e,weight:n}),this.edges.push({from:e,to:t,weight:n}),this.render()):alert("Add both vertices first!")},getNeighbors:function(e){return this.adjList[e]||[]},hasVertex:function(e){return this.vertices.includes(e)},getVertices:function(){return this.vertices},getAllEdges:function(){return this.edges||[]},render:function(){R(this)}};async function M(e,t,n,s){t[e]=!0,await g(e),await H(600);for(let a of p.adjList[e]||[])if(t[a]){if(a!==s)return await g(e),await g(a),F(e,a),!0}else if(n[a]=e,await M(a,t,n,e))return!0;return await g(e),!1}function R(e){const t=document.getElementById("visualize");t.innerHTML="",t.style.position="relative";const n=150,s=t.offsetWidth/2,a=t.offsetHeight/2,i={};e.vertices.forEach((c,r)=>{const l=2*Math.PI*r/e.vertices.length,d=s+n*Math.cos(l),m=a+n*Math.sin(l);i[c]={x:d,y:m};const u=document.createElement("div");u.className="absolute w-10 h-10 rounded-full bg-blue-500 text-white flex justify-center items-center font-bold transition-transform scale-0",u.innerText=c,u.style.left=`${d-20}px`,u.style.top=`${m-20}px`,t.appendChild(u),requestAnimationFrame(()=>u.classList.replace("scale-0","scale-100"))}),e.edges.forEach(({from:c,to:r})=>{const l=i[c],d=i[r];l&&d&&F(l,d)})}function F(e,t){const n=document.createElement("div");n.className="absolute text-white text-xl";const s=t.x-e.x;t.y-e.y;const a=s<0?"↖":s>0?"↘":"↓";n.innerText=a,n.style.left=`${(e.x+t.x)/2}px`,n.style.top=`${(e.y+t.y)/2}px`,n.style.transform="translate(-50%, -50%)",document.getElementById("visualize").appendChild(n)}function H(e){return new Promise(t=>setTimeout(t,e))}const v=new V,o={array:{insert:function(e,t){const n=document.getElementById("visualize"),s=b(t);n.insertBefore(s,n.children[e]),requestAnimationFrame(()=>s.classList.add("scale-100"))},delete:function(e){const n=document.getElementById("visualize").children[e];n&&(n.classList.remove("scale-100"),setTimeout(()=>n.remove(),800))},access:function(e){const n=document.getElementById("visualize").children[e];n&&(n.classList.add("bg-yellow-400"),setTimeout(()=>n.classList.remove("bg-yellow-400"),5e3))},update:function(e,t){const s=document.getElementById("visualize").children[e];if(!s){alert("Invalid index!!");return}s.classList.add("bg-yellow-400"),setTimeout(()=>{s.innerText=t,s.classList.add("pulse"),setTimeout(()=>{s.classList.remove("bg-yellow-400"),s.classList.remove("pulse")},600)},500)}},string:{reverse:async function(e){const t=document.getElementById("visualize");t.innerHTML="";const n=e.split("");n.forEach((i,c)=>{const r=b(i);r.id=`char-${c}`,t.appendChild(r),requestAnimationFrame(()=>{r.classList.add("scale-100")})}),await h(900);let s=0,a=n.length-1;for(;s<a;){const i=document.getElementById(`char-${s}`),c=document.getElementById(`char-${a}`);i.classList.add("bg-yellow-500"),c.classList.add("bg-yellow-500"),await h(1200);const r=i.innerText;i.innerText=c.innerText,c.innerText=r,i.classList.remove("bg-yellow-500"),c.classList.remove("bg-yellow-500"),s++,a--,await h(1e3)}},substring:function(e,t){const n=document.getElementById("visualize");n.innerHTML="";const s=document.createElement("h1");s.innerText="Entered string : "+e+`
substring : `,s.className="text-white text-2xl font-semibold mb-8",n.appendChild(s),t.split("").forEach(i=>{const c=b(i);n.appendChild(c),requestAnimationFrame(()=>c.classList.add("scale-100"))})},uppercase:async function(e){const t=document.getElementById("visualize");t.innerHTML="";const n=e.split("");n.forEach((s,a)=>{const i=b(s);i.id=`char-${a}`,t.appendChild(i),requestAnimationFrame(()=>i.classList.add("scale-100"))});for(let s=0;s<n.length;s++){await h(700);const a=document.getElementById(`char-${s}`);a.innerText=a.innerText.toUpperCase(),a.classList.add("bg-yellow-400"),await h(500),a.classList.remove("bg-yellow-400")}},trim:async function(e){const t=document.getElementById("visualize");t.innerHTML="";const n=e.split("");n.forEach((r,l)=>{const d=b(r===" "?"␣":r);d.id=`char-${l}`,t.appendChild(d),requestAnimationFrame(()=>d.classList.add("scale-100"))}),await h(1e3);let s=0;for(;s<n.length&&n[s]===" ";)s++;let a=n.length-1;for(;a>=0&&n[a]===" ";)a--;for(let r=0;r<s;r++)document.getElementById(`char-${r}`).classList.add("bg-red-500","line-through"),await h(300);for(let r=n.length-1;r>a;r--)document.getElementById(`char-${r}`).classList.add("bg-red-500","line-through"),await h(300);await h(500);for(let r=s;r<=a;r++)document.getElementById(`char-${r}`).classList.add("bg-yellow-400"),await h(300);await h(800);const i=e.trim(),c=document.createElement("h1");c.innerText=`Trimmed string: "${i}"`,c.className="text-white text-2xl font-semibold mt-8",t.appendChild(c)}},linkedlist:{render:function(e){const t=document.getElementById("visualize");t.innerHTML="";let n=e.head,s=0;for(;n;){const a=b(n.value);if(a.id=`node-${s}`,t.appendChild(a),n.next){const i=document.createElement("span");i.innerText="→",i.id=`arrow-${s}`,i.className="text-white text-4xl mx-2",t.appendChild(i)}n=n.next,s++}},insertfront:function(e,t){e.insertAtStart(t),this.render(e)},insertend:function(e,t){e.insertAtEnd(t),this.render(e)},deletenode:function(e,t){e.deleteAtIndex(t),this.render(e)},search:async function(e,t){document.getElementById("visualize");let n=e.head,s=0;for(;n;){const a=document.getElementById(`node-${s}`);if(a&&a.classList.add("bg-yellow-400"),n.value===t){a&&a.classList.add("bg-green-500"),alert(`Value ${t} found at index ${s}`);break}await h(1e3),a&&a.classList.remove("bg-yellow-400"),n=n.next,s++}n||alert(`Value ${t} not found`)},update:function(e,t,n){e.updateAtIndex(t,n)?this.render(e):alert("Invalid index!")}},stack:{push:function(e){const t=document.getElementById("visualize");t.classList.add("flex-col-reverse");const n=document.createElement("div");n.className="w-32 h-12 bg-cyan-600 text-white font-bold flex items-center justify-center rounded-md shadow-md transform scale-0 transition-transform duration-300",n.innerText=e,t.appendChild(n),requestAnimationFrame(()=>{n.classList.add("scale-100")})},pop:function(){const e=document.getElementById("visualize"),t=e.lastElementChild;if(!t){alert("Stack is empty!");return}t.classList.remove("scale-100"),t.classList.add("scale-0"),setTimeout(()=>{e.removeChild(t)},300)},peek:function(){const t=document.getElementById("visualize").lastElementChild;if(!t){alert("Stack is empty!");return}t.classList.remove("bg-cyan-600"),t.classList.add("bg-yellow-400"),setTimeout(()=>{t.classList.remove("bg-yellow-400"),t.classList.add("bg-cyan-600")},800)}},queue:{enqueue:function(e){const t=document.getElementById("visualize"),n=b(e);if(t.appendChild(n),requestAnimationFrame(()=>n.classList.add("scale-100")),t.querySelectorAll(".queue-label").forEach(s=>s.remove()),t.firstElementChild){const s=document.createElement("div");s.innerText="Front",s.className="queue-label text-xs text-white mt-1",t.firstElementChild.appendChild(s)}if(t.lastElementChild){const s=document.createElement("div");s.innerText="Rear",s.className="queue-label text-xs text-white mt-1",t.lastElementChild.appendChild(s)}},dequeue:function(){const e=document.getElementById("visualize"),t=e.firstElementChild;if(!t){alert("Queue is empty!");return}t.classList.remove("scale-100"),t.classList.add("scale-0"),setTimeout(()=>{if(e.removeChild(t),e.querySelectorAll(".queue-label").forEach(n=>n.remove()),e.firstElementChild){const n=document.createElement("div");n.innerText="Front",n.className="queue-label text-xs text-white mt-1",e.firstElementChild.appendChild(n)}if(e.lastElementChild){const n=document.createElement("div");n.innerText="Rear",n.className="queue-label text-xs text-white mt-1",e.lastElementChild.appendChild(n)}},300)},peek:function(){const t=document.getElementById("visualize").firstElementChild;if(!t){alert("Queue is empty!");return}t.classList.remove("bg-cyan-600"),t.classList.add("bg-yellow-400"),setTimeout(()=>{t.classList.remove("bg-yellow-400"),t.classList.add("bg-cyan-600")},800)}},tree:{insert:function(){const e=f();if(isNaN(e))return;const t=I(w(),e);q(t),A(t)},delete:function(){const e=f();if(isNaN(e))return;const t=E(w(),e);q(t),A(t)},inordertraversal:async function(){const e=w();e&&await N(e)},preordertraversal:async function(){const e=w();e&&await B(e)},postordertraversal:async function(){const e=w();e&&await $(e)},levelordertraversal:async function(){const e=w();e&&await O(e)}},graph:{addvertex:function(e=null){const t=e??prompt("Enter vertex label (e.g., A):");t&&p.addVertex(t.trim())},addedge:function(e=null,t=null){(!e||!t)&&(e=prompt("From vertex:"),t=prompt("To vertex:")),e&&t&&p.addEdge(e.trim(),t.trim())},bfs:async function(){const e=prompt("Enter start node:").trim().toLowerCase();if(!p.adjList||!p.adjList[e]){alert("Start node not found in graph!");return}const t={},n=[];for(t[e]=!0,n.push(e);n.length>0;){const s=n.shift();await g(s);for(const a of p.adjList[s]){const i=a.node;t[i]||(t[i]=!0,n.push(i))}}},dfs:async function(){const e=prompt("Enter start node:").trim().toLowerCase();if(!p.adjList||!p.adjList[e]){alert("Start node not found!");return}const t={};async function n(s){if(!(!s||t[s])){t[s]=!0,await g(s);for(const a of p.adjList[s]){const i=a.node;await n(i)}}}await n(e)},cycleDetect:async function(){const e={},t={},n=Object.keys(p.adjList);for(let s of n)if(!e[s]&&await M(s,e,t,null)){alert("Cycle detected!");return}alert("No cycle detected!")}},mapsandsets:{inserthashmap:async function(){const e=document.getElementById("visualize"),t=x(),n=f();e.innerHTML="";const s=7,a=Array.from({length:s},(c,r)=>{const l=b("");return l.id=`bucket-${r}`,l});a.forEach(c=>e.appendChild(c));const i=C(t,s);y(i,`Inserting {${t}: ${n}}`,t),await L(1e3),a[i].textContent=`${t}: ${n}`,a[i].classList.add("bg-green-200")},deletehashmap:async function(){document.getElementById("visualize");const e=x(),n=C(e,7),s=document.getElementById(`bucket-${n}`);s&&s.textContent.startsWith(`${e}:`)?(y(n,`Deleting key "${e}"`,e),await L(1e3),s.textContent="",s.classList.remove("bg-green-200"),s.classList.add("bg-red-100")):k(`Key "${e}" not found`)},searchhashmap:async function(){const e=x(),n=C(e,7),s=document.getElementById(`bucket-${n}`);y(n,`Searching key "${e}"`,e),await L(1e3),s&&s.textContent.startsWith(`${e}:`)?s.classList.add("border-4","border-blue-400"):k(`Key "${e}" not found`)},inserthashset:async function(){const e=document.getElementById("visualize"),t=f();e.innerHTML="";const n=7,s=Array.from({length:n},(i,c)=>{const r=b("");return r.id=`bucket-${c}`,r});s.forEach(i=>e.appendChild(i));const a=t%n;y(a,"Inserting",t),await L(1e3),s[a].textContent=t,s[a].classList.add("bg-green-500")},deletehashset:async function(){const e=f(),n=e%7,s=document.getElementById(`bucket-${n}`);s&&s.textContent==e.toString()&&(y(n,"Deleting",e),await L(1e3),s.textContent="",s.classList.remove("bg-green-500"),s.classList.add("bg-red-100"))},searchhashset:async function(){const e=f(),n=e%7,s=document.getElementById(`bucket-${n}`);y(n,"Searching",e),await L(1e3),s&&s.textContent==e.toString()?s.classList.add("border-4","border-blue-400"):k("Not found")}}};function h(e){return new Promise(t=>setTimeout(t,e))}window.runVisualOperation=function(e,t){const n=o[e==null?void 0:e.toLowerCase()];if(!n||!n[t.toLowerCase()]){alert("Operation not supported yet.");return}try{if(e==="array")switch(t){case"insert":D();break;case"delete":K();break;case"update":W();break;case"access":U();break;default:alert("No operation found !!")}else if(e==="string")switch(t){case"reverse":const s=x("reverse");s&&o.string.reverse(s);break;case"substring":const a=x("get substring");if(!a){alert("No input string provided.");return}const i=parseInt(prompt("Enter the starting index:")),c=parseInt(prompt("Enter the ending index (excluded):"));if(isNaN(i)||isNaN(c)||i<0||c>a.length||i>=c){alert("Invalid indices!");return}const r=Q(i,c,a);o.string.substring(a,r);break;case"uppercase":const l=x("get uppercase substring");o.string.uppercase(l);break;case"trim":const d=x("get trimmed string");o.string.trim(d);break}else if(e.toLowerCase()==="linkedlist")switch(t.toLowerCase()){case"insertfront":const s=f();o.linkedlist.insertfront(v,s);break;case"insertend":const a=f();o.linkedlist.insertend(v,a);break;case"deletenode":const i=parseInt(prompt("Enter the index to delete:"));isNaN(i)||o.linkedlist.deletenode(v,i);break;case"traverse":alert("Linked List: "+v.toArray().join(" → "));break;case"search":const c=f();o.linkedlist.search(v,c);break;case"update":const r=parseInt(prompt("Enter the index to update:")),l=f();isNaN(r)||o.linkedlist.update(v,r,l);break;default:alert("LinkedList operation not supported!")}else if(e.toLowerCase()==="stack")switch(t){case"push":const s=f();o.stack.push(s);break;case"pop":o.stack.pop();break;case"peek":o.stack.peek();break}else if(e.toLowerCase()==="queue")switch(t){case"enqueue":const s=f();o.queue.enqueue(s);break;case"dequeue":o.queue.dequeue();break;case"peek":o.queue.peek()}else if(e.toLowerCase()==="tree")switch(t){case"insert":o.tree.insert();break;case"delete":o.tree.delete();break;case"inordertraversal":o.tree.inordertraversal();break;case"preordertraversal":o.tree.preordertraversal();break;case"postordertraversal":o.tree.postordertraversal();break;case"levelordertraversal":o.tree.levelordertraversal();break}else if(e.toLowerCase()==="graph")switch(t){case"addvertex":o.graph.addvertex();break;case"addedge":o.graph.addedge();break;case"bfs":o.graph.bfs();break;case"dfs":o.graph.dfs();break}else if(e.toLowerCase()==="mapsandsets")switch(t){case"inserthashmap":o.mapsandsets.inserthashmap();break;case"deletehashmap":o.mapsandsets.deletehashmap();break;case"searchhashmap":o.mapsandsets.searchhashmap();break;case"inserthashset":o.mapsandsets.inserthashset();break;case"deletehashset":o.mapsandsets.deletehashset();break;case"searchhashset":o.mapsandsets.searchhashset();break}}catch(s){console.error(s),alert("Something went wrong in visualization.")}};function b(e){const t=document.createElement("div");return t.className="w-16 h-16 bg-cyan-600 mr-2 text-white font-bold flex items-center justify-center rounded-md shadow-md transform transition-transform duration-300",t.innerText=e,t}document.getElementById("visualize");function D(){const e=parseInt(prompt("Enter the index to insert at:")),t=prompt("Enter the value to insert:");!isNaN(e)&&t!==null&&t!==""&&o.array.insert(e,t)}function K(){const e=parseInt(prompt("Enter the index to delete:"));isNaN(e)||o.array.delete(e)}function U(){const e=parseInt(prompt("Enter the index to access:"));isNaN(e)||o.array.access(e)}function W(){const e=parseInt(prompt("Enter the index to update:")),t=prompt("Enter the new value:");!isNaN(e)&&t!==null&&t!==""&&o.array.update(e,t)}function x(e){return prompt(`Enter a string to ${e}`)}function Q(e,t,n){return n.substring(e,t)}function f(){return parseInt(prompt("Enter the value : "))}function y(e,t,n){const s=document.getElementById(`bucket-${e}`);s&&(s.classList.add("bg-yellow-500"),k(`${t} ${n} at index ${e}`))}function C(e,t){let n=0;for(let s=0;s<e.length;s++)n+=e.charCodeAt(s);return n%t}function k(e){const t=z(),n=document.getElementById("message")||document.createElement("div");n.id="message",n.className="my-2 text-sm text-white",n.innerText=e,t.appendChild(n)}function L(e){return new Promise(t=>setTimeout(t,e))}export{K as a,U as b,W as c,Q as d,y as e,C as f,k as g,D as h,f as i,L as j,x as s};
